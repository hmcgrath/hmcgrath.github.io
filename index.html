<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>
      Farmers: Runoff Forecaster
    </title>

	<!-- Load Leaflet from CDN -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
	  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
	  crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
	  integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
	  crossorigin=""></script>

	<!-- Leaflet-GeoTIFF-2 Library & Dependancies (GeoTiff.js and plotty.js)-->
	<script src="https://unpkg.com/geotiff@1.0.0-beta.13/dist-browser/geotiff.js"></script>
    <script src="https://unpkg.com/plotty@0.4.1/dist/plotty.js"></script>
    <script src="https://unpkg.com/leaflet-geotiff-2@0.2.5/dist/leaflet-geotiff.js"></script>
    <script src="https://unpkg.com/leaflet-geotiff-2@0.2.5/dist/leaflet-geotiff-plotty.js"></script>	
	
	<!-- Load JQuery Library (translate between Javascript and Json) -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

	<style>
		html, body {
			height: 100%;
			margin: 0;
		}
		.leaflet-container {
			height: 600px;
			width: 600px;
			max-width: 100%;
			max-height: 100%;
		}
	</style>
	
	 <link rel="stylesheet" href="RunoffPred.css" />
</head>
<body>

		
		<script src="Top_Ribbon.js"></script>
	</div>


 <div id="mapid"></div>

<script>

		const mymap = L.map("mapid").setView([43.356, -80.316], 6);
		L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
			maxZoom: 19,
			attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
		}).addTo(mymap);
		 
		 /*************************
		 
		
		 
 * Add a GEOJson layer - Catchment Polygons
         *************************/

		// Define the symbology of the catchment polygons
// Set up styles for subway lines
 

// Set up styles for watershed polygon
function subteStyle(feature) {
  var colorToUse;
  var poly = feature.properties.ShortTerm;
            
  if (poly === "Low") colorToUse = "#FFDD26";
  else if (poly === "Med") colorToUse = "#FF681C";
  else if (poly === "High") colorToUse = "#CE2029";
  else colorToUse = "#FF00FF05";
            
  return {
    "fillColor": colorToUse,
    "weight": 0.5,
	"opacity": 1,
	"color": '#808080',
    "fillOpacity": 0.8
  };
}

// Set up styles for watershed polygon
function subteStyleM(feature) {
  var colorToUse;
  var poly = feature.properties.MidTerm;
            
  if (poly === "Low") colorToUse = "#FFDD26";
  else if (poly === "Med") colorToUse = "#FF681C";
  else if (poly === "High") colorToUse = "#CE2029";
  else colorToUse = "#FF00FF05";
            
  return {
    "fillColor": colorToUse,
    "weight": 0.5,
	"opacity": 1,
	"color": '#808080',
    "fillOpacity": 0.8
  };
}

// Set up styles for watershed polygon
function subteStyleL(feature) {
  var colorToUse;
  var poly = feature.properties.LongTerm;
            
  if (poly === "Low") colorToUse = "#FFDD26";
  else if (poly === "Med") colorToUse = "#FF681C";
  else if (poly === "High") colorToUse = "#CE2029";
  else colorToUse = "#FF00FF05";
            
  return {
    "fillColor": colorToUse,
    "weight": 0.5,
	"opacity": 1,
	"color": '#808080',
    "fillOpacity": 0.8
  };
}

// Set up styles for watershed polygon
function subteStyleXL(feature) {
  var colorToUse;
  var poly = feature.properties.XLTerm;
            
  if (poly === "Low") colorToUse = "#FFDD26";
  else if (poly === "Med") colorToUse = "#FF681C";
  else if (poly === "High") colorToUse = "#CE2029";
  else colorToUse = "#FF00FF05";
            
  return {
    "fillColor": colorToUse,
    "weight": 0.5,
	"opacity": 1,
	"color": '#808080',
    "fillOpacity": 0.8
  };
}


		//Create a GeoJSON layer - short term
		var geojsonLayer = new L.GeoJSON(geojsonLayer, {
			style: subteStyle
		}).addTo(mymap);

		//Request the GeoJson data from GitHub using Ajax
		const Catchment_url = "https://hmcgrath.github.io/data/WS_Smooth.geojson";
		$.ajax({
		dataType: "json",
		url: Catchment_url,
		success: function(data) {
				geojsonLayer.addData(data);
		}
		}).error(function() {});
		
		
		//Create a GeoJSON layer - MED term
		var geojsonLayerM = new L.GeoJSON(geojsonLayerM, {
			style: subteStyleM
		});
		//Request the GeoJson data from GitHub using Ajax
		$.ajax({
		dataType: "json",
		url: Catchment_url,
		success: function(data) {
				geojsonLayerM.addData(data);
		}
		}).error(function() {});
		
		//Create a GeoJSON layer - LONG term
		var geojsonLayerL = new L.GeoJSON(geojsonLayerL, {
			style: subteStyleL
		});
		//Request the GeoJson data from GitHub using Ajax
		$.ajax({
		dataType: "json",
		url: Catchment_url,
		success: function(data) {
				geojsonLayerL.addData(data);
		}
		}).error(function() {});
		
		//Create a GeoJSON layer - XL term
		var geojsonLayerXL = new L.GeoJSON(geojsonLayerXL, {
			style: subteStyleXL
		});
		//Request the GeoJson data from GitHub using Ajax
		$.ajax({
		dataType: "json",
		url: Catchment_url,
		success: function(data) {
				geojsonLayerXL.addData(data);
		}
		}).error(function() {});
		
		
		
		
		
var selectLayers = {
    geojsonLayer, // same as cities: cities
  geojsonLayerM,
  geojsonLayerL,
  geojsonLayerXL
}

var legend = L.control({position: 'topright'});
legend.onAdd = function (mymap) {
    var div = L.DomUtil.create('div', 'info legend');
    div.innerHTML = '<select><option value="geojsonLayer">Short Term</option><option value="geojsonLayerM">Medium Term</option><option value="geojsonLayerL">Long Term</option><option value="geojsonLayerXL">XLong Term</option></select>';
    L.DomEvent.disableClickPropagation(div);
    L.DomEvent.on(div,'change',function(e){
     	var select = e.target;
      for(var name in selectLayers){
        selectLayers[name].removeFrom(mymap);
      }
      selectLayers[select.value].addTo(mymap);
    });
    return div;
};
legend.addTo(mymap);


		
		</script>

<img src="https://hmcgrath.github.io/legend/Legend.png" alt="legend" width="150" height="100">

</body>

</html>