<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>
      Farmers: Runoff Forecaster
    </title>

	<!-- Load Leaflet from CDN -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
	  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
	  crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
	  integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
	  crossorigin=""></script>

	<!-- Leaflet-GeoTIFF-2 Library & Dependancies (GeoTiff.js and plotty.js)-->
	<script src="https://unpkg.com/geotiff@1.0.0-beta.13/dist-browser/geotiff.js"></script>
    <script src="https://unpkg.com/plotty@0.4.1/dist/plotty.js"></script>
    <script src="https://unpkg.com/leaflet-geotiff-2@0.2.5/dist/leaflet-geotiff.js"></script>
    <script src="https://unpkg.com/leaflet-geotiff-2@0.2.5/dist/leaflet-geotiff-plotty.js"></script>	
	
	<!-- Load JQuery Library (translate between Javascript and Json) -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

	<style>
	 html,body {
		  height: 100%;
		  width: 100%;
		 
		}
	.hero-image {
  background-image:url("https://hmcgrath.github.io/header_img.png");

  /* Set a specific height */
  height: 55%;

  /* Position and center the image to scale nicely on all screens */
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  position: relative;
}


		#leaflet-container {
			height: 400;
			width: 400;
			max-width: 100%;
			max-height: 75%;
			position: relative
		}
		

	</style>
	
	 <link rel="stylesheet" href="RunoffPred.css" />
	
</head>
<body>


<div class="hero-image">
  
</div>

		<h1> Farmers Forecast - runoff potential </h1>
		
	</div>


<img src="https://hmcgrath.github.io/legend/legend2.png" alt="legend" width="300" height="50">


 <div id="mapid" ></div>

<script>

		const mymap = L.map("mapid").setView([44.13, -80.316], 10);
		L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
			maxZoom: 19,
			attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
		}).addTo(mymap);
		 
		 /*************************
		 
		
		 
 * Add a GEOJson layer - Catchment Polygons
         *************************/

		// Define the symbology of the catchment polygons
// Set up styles for subway lines
 

// Set up styles for watershed polygon
function subteStyle(feature) {
  var colorToUse;
  var poly = feature.properties.Sterm;
  if (poly === "20") colorToUse = "#1F88C7";
  else if (poly === "30") colorToUse = "#1F88C7";
  else if (poly === "30") colorToUse = "#63A1B5";
  else if (poly === "40") colorToUse = "#93B79F";
  else if (poly === "50") colorToUse = "#BECD85";
  else if (poly === "60") colorToUse = "#E8E56D";
  else if (poly === "70") colorToUse = "#FF8B2D";
  else if (poly === "80") colorToUse = "#FF621E";
  else if (poly === "90") colorToUse = "#FF2512";
  else if (poly === "100") colorToUse = "#FF2512";
  else colorToUse = "#FF00FF05";
            
  return {
    "fillColor": colorToUse,
    "weight": 0.25,
	"opacity": 1,
	"color": '#808080',
    "fillOpacity": 0.8
  };
}

// Set up styles for watershed polygon
function subteStyleM(feature) {
  var colorToUse;
  var poly = feature.properties.MTerm;
            
  if (poly === "20") colorToUse = "#1F88C7";
  else if (poly === "30") colorToUse = "#1F88C7";
  else if (poly === "30") colorToUse = "#63A1B5";
  else if (poly === "40") colorToUse = "#93B79F";
  else if (poly === "50") colorToUse = "#BECD85";
  else if (poly === "60") colorToUse = "#E8E56D";
  else if (poly === "70") colorToUse = "#FF8B2D";
  else if (poly === "80") colorToUse = "#FF621E";
  else if (poly === "90") colorToUse = "#FF2512";
  else if (poly === "100") colorToUse = "#FF2512";
  else colorToUse = "#FF00FF05";
            
  return {
    "fillColor": colorToUse,
    "weight": 0.25,
	"opacity": 1,
	"color": '#808080',
    "fillOpacity": 0.8
  };
}

// Set up styles for watershed polygon
function subteStyleL(feature) {
  var colorToUse;
  var poly = feature.properties.LTerm;
            
  if (poly === "20") colorToUse = "#1F88C7";
  else if (poly === "30") colorToUse = "#1F88C7";
  else if (poly === "30") colorToUse = "#63A1B5";
  else if (poly === "40") colorToUse = "#93B79F";
  else if (poly === "50") colorToUse = "#BECD85";
  else if (poly === "60") colorToUse = "#E8E56D";
  else if (poly === "70") colorToUse = "#FF8B2D";
  else if (poly === "80") colorToUse = "#FF621E";
  else if (poly === "90") colorToUse = "#FF2512";
  else if (poly === "100") colorToUse = "#FF2512";
  else colorToUse = "#FF00FF05";
            
  return {
    "fillColor": colorToUse,
    "weight": 0.25,
	"opacity": 1,
	"color": '#808080',
    "fillOpacity": 0.8
  };
}

// Set up styles for watershed polygon
function subteStyleXL(feature) {
  var colorToUse;
  var poly = feature.properties.XL_Term;
            
  if (poly === "20") colorToUse = "#1F88C7";
  else if (poly === "30") colorToUse = "#1F88C7";
  else if (poly === "30") colorToUse = "#63A1B5";
  else if (poly === "40") colorToUse = "#93B79F";
  else if (poly === "50") colorToUse = "#BECD85";
  else if (poly === "60") colorToUse = "#E8E56D";
  else if (poly === "70") colorToUse = "#FF8B2D";
  else if (poly === "80") colorToUse = "#FF621E";
  else if (poly === "90") colorToUse = "#FF2512";
  else if (poly === "100") colorToUse = "#FF2512";
  else colorToUse = "#FF00FF05";
            
  return {
    "fillColor": colorToUse,
    "weight": 0.25,
	"opacity": 1,
	"color": '#808080',
    "fillOpacity": 0.8
  };
}



		//Create a GeoJSON layer - short term
		var geojsonLayer = new L.GeoJSON(geojsonLayer, {
			style: subteStyle
		}).addTo(mymap);

		//Request the GeoJson data from GitHub using Ajax
		const Catchment_url = "https://hmcgrath.github.io/data/Grand1km.geojson";
		$.ajax({
		dataType: "json",
		url: Catchment_url,
		success: function(data) {
				geojsonLayer.addData(data);
		}
		}).error(function() {});
		
		
		//Create a GeoJSON layer - MED term
		var geojsonLayerM = new L.GeoJSON(geojsonLayerM, {
			style: subteStyleM
		});
		//Request the GeoJson data from GitHub using Ajax
		$.ajax({
		dataType: "json",
		url: Catchment_url,
		success: function(data) {
				geojsonLayerM.addData(data);
		}
		}).error(function() {});
		
		//Create a GeoJSON layer - LONG term
		var geojsonLayerL = new L.GeoJSON(geojsonLayerL, {
			style: subteStyleL
		});
		//Request the GeoJson data from GitHub using Ajax
		$.ajax({
		dataType: "json",
		url: Catchment_url,
		success: function(data) {
				geojsonLayerL.addData(data);
		}
		}).error(function() {});
		
		//Create a GeoJSON layer - XL term
		var geojsonLayerXL = new L.GeoJSON(geojsonLayerXL, {
			style: subteStyleXL
		});
		//Request the GeoJson data from GitHub using Ajax
		$.ajax({
		dataType: "json",
		url: Catchment_url,
		success: function(data) {
				geojsonLayerXL.addData(data);
		}
		}).error(function() {});
		
		
		
		
		
var selectLayers = {
    geojsonLayer, // same as cities: cities
  geojsonLayerM,
  geojsonLayerL,
  geojsonLayerXL
}

var legend = L.control({position: 'topleft'});
legend.onAdd = function (mymap) {
    var div = L.DomUtil.create('div', 'info legend');
    div.innerHTML = '<select><option value="geojsonLayer">Short Term</option><option value="geojsonLayerM">Medium Term</option><option value="geojsonLayerL">Long Term</option><option value="geojsonLayerXL">XLong Term</option></select>';
    L.DomEvent.disableClickPropagation(div);
    L.DomEvent.on(div,'change',function(e){
     	var select = e.target;
      for(var name in selectLayers){
        selectLayers[name].removeFrom(mymap);
      }
      selectLayers[select.value].addTo(mymap);
    });
    return div;
};
legend.addTo(mymap);


		</script>


</body>

</html>